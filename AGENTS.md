# Project Playbook

–î–æ–∫—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: —á—Ç–æ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å –æ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ, –º–∞—Å—Ç–µ—Ä–µ –ø–æ—Å—Ç–∞–≤–æ–∫ –∏ —Ä–∞–±–æ—á–µ–º –ø—Ä–æ—Ü–µ—Å—Å–µ.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ NestJS** –∂–∏–≤—ë—Ç –≤ `apps/bot-api/src`.
- **–ë–æ—Ç** (`bot/`): Telegram-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏, –º–∞—Å—Ç–µ—Ä –ø–æ—Å—Ç–∞–≤–∫–∏, —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –¥–∞–Ω–Ω—ã—Ö (TypeORM + SQLite).
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** (`config/`, `ozon/`): `OzonApiService`, —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤, —Ç–∞–π–º—Å–ª–æ—Ç–æ–≤ –∏ —Ñ–æ–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ** (`storage/`): TypeORM-—Å—É—â–Ω–æ—Å—Ç–∏ `user_credentials`, `supply_orders` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ store‚Äë–∫–ª–∞—Å—Å—ã.
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: Dockerfile –≤ `infra/`, CI –≤ `.github/workflows/ci.yml`.

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–∞—Å—Ç–µ—Ä
1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Äî `/ozon_auth` –ª–∏–±–æ –≤–≤–æ–¥ Client ID / API Key –≤ –º–∞—Å—Ç–µ—Ä–µ. –ö–ª—é—á–∏ –ª–µ–∂–∞—Ç –≤ SQLite –∏ –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–∞—Ö.
2. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞** ‚Äî Excel/Google Sheet. –ü–∞—Ä—Å–µ—Ä –ø—Ä–∏–≤–æ–¥–∏—Ç –∑–∞–¥–∞—á–∏ –∫ `OzonSupplyTask`.
3. **–ü–æ–∏—Å–∫ drop-off** ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ —Å –æ—Ç–≤–µ—Ç–∞–º–∏ –∏–∑ `/v1/warehouse/fbo/list`.
4. **–í—ã–±–æ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞** ‚Äî –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º `/v1/cluster/list` c `cluster_ids=[id]`.
5. **–í—ã–±–æ—Ä —Å–∫–ª–∞–¥–∞** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (10 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É), —Å—Ç—Ä–µ–ª–∫–∏, —Å–±—Ä–æ—Å –ø–æ–∏—Å–∫–∞, –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É –∫–ª–∞—Å—Ç–µ—Ä–æ–≤.
6. **–¢–∞–π–º—Å–ª–æ—Ç—ã** ‚Äî —Å–æ–∑–¥–∞—ë–º/–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º —á–µ—Ä–Ω–æ–≤–∏–∫, –≤—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ç–∞–π–º—Å–ª–æ—Ç.
7. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ + —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ (0, 2‚Äì28 –¥–Ω–µ–π). –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∑–∞–¥–∞—á–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `supply_orders`, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `processSupplyTask`.
8. **–§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** ‚Äî `SupplyTaskRunnerService` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–æ–ª–ª–∏–Ω–≥ API, —Å–æ–∑–¥–∞—ë—Ç –ø–æ—Å—Ç–∞–≤–∫—É, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞–º.

## –ö–æ–¥—Å—Ç–∞–π–ª –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è
- TypeScript, —Å—Ç—Ä–æ–≥–∏–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä, 2 –ø—Ä–æ–±–µ–ª–∞.
- –ö–ª–∞—Å—Å—ã –≤ PascalCase, —Ñ–∞–π–ª—ã/–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤ kebab-case.
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤ Ozon –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ `OzonApiService`. –î–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, —Ä–∞—Å—à–∏—Ä—è–π—Ç–µ —Å–µ—Ä–≤–∏—Å, –∞ –Ω–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ `axios` –Ω–∞–ø—Ä—è–º—É—é.
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –º–∞—Å—Ç–µ—Ä–∞ –∂–∏–≤—ë—Ç –≤ `SupplyWizardHandler`. –ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ø—Ä–æ–¥—É–º–∞–π—Ç–µ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`SupplyWizardStore`) –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (`SupplyWizardViewService`).
- –õ—é–±—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ–∫—Ä–µ—Ç—ã –º–∞—Å–∫–∏—Ä—É–µ–º, —Ö—Ä–∞–Ω–∏–º –≤ –±–∞–∑–µ —Ç–æ–ª—å–∫–æ –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º/–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º –≤–∏–¥–µ.

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- README –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π –º–∞—Å—Ç–µ—Ä–∞ –∏ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞. –û–±–Ω–æ–≤–ª—è–π—Ç–µ –µ–≥–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —à–∞–≥–æ–≤ –∏–ª–∏ –∫–æ–º–∞–Ω–¥.
- –≠—Ç–æ—Ç —Ñ–∞–π–ª (AGENTS.md) —Å–æ–¥–µ—Ä–∂–∏—Ç –±—ã—Å—Ç—Ä—ã–π –ø–ª–∞–Ω –¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤. –î–µ—Ä–∂–∏—Ç–µ –µ–≥–æ –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
- –ï—Å–ª–∏ –≤–Ω–æ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–∞—Å—Ç–µ—Ä, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ help-—Å–æ–æ–±—â–µ–Ω–∏–µ (`BotUpdate.helpMessage`).

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
1. `yarn install`, `yarn start:dev` ‚Äî –±–æ—Ç –∏ SQLite –ø–æ–¥–Ω–∏–º—É—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.
2. –í–Ω–æ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ TDD –¥–ª—è –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤). –ê–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤–ª—è–π—Ç–µ unit/e2e –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.
3. –ü–µ—Ä–µ–¥ –ø—É—à–µ–º ‚Äî `yarn build` –∏ –∫—Ä–∞—Ç–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—Ç–µ—Ä–∞ (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞, –≤—ã–±–æ—Ä drop-off/—Å–∫–ª–∞–¥–∞, –æ—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á–∏, –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫).
4. –ö–æ–º–º–∏—Ç—ã ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–µ, –≤ –ø–æ–≤–µ–ª–∏—Ç–µ–ª—å–Ω–æ–º –Ω–∞–∫–ª–æ–Ω–µ–Ω–∏–∏. PR: –º–æ—Ç–∏–≤–∞—Ü–∏—è, —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ.

## –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –º–µ—Ä–¥–∂–µ–º
- [ ] README –æ—Ç—Ä–∞–∂–∞–µ—Ç –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π.
- [ ] Help-—Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∫–æ–¥—É.
- [ ] `yarn build` –±–µ–∑ –æ—à–∏–±–æ–∫.
- [ ] –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞–¥–∞—á–∏ –Ω–µ—Ç –∑–∞–≤–∏—Å—à–∏—Ö –ø–æ–ª–ª–∏–Ω–≥–æ–≤.
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–ª—é—á–µ–≤—ã—Ö —Ç–æ—á–∫–∞—Ö (auth, draft, supply).

–°–ª–µ–¥—É—è —ç—Ç–æ–º—É Playbook, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–æ—Ç–∞ –∏ –Ω–∞—Ä–∞—â–∏–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—â–µ. –£–¥–∞—á–∏! üöÄ
